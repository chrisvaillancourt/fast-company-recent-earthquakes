document.addEventListener("DOMContentLoaded",void require(["esri/Map","esri/Basemap","esri/layers/VectorTileLayer","esri/layers/TileLayer","esri/views/MapView","esri/layers/GeoJSONLayer","esri/widgets/Home","esri/widgets/Legend","esri/layers/support/Field"],function(e,a,t,r,s,o,i,l,n){var c,u=new o({url:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson",copyright:"USGS Earthquakes",renderer:{type:"simple",field:"mag",symbol:{type:"simple-marker",color:"orange",outline:null},visualVariables:[{type:"size",field:"mag",stops:[{value:2,size:"5px"},{value:4,size:"32px"},{value:7,size:"55px"}]},{type:"color",field:"mag",stops:[{value:2,color:"#fffeb1",label:"Mag. 2"},{value:4,color:"#FD8D3C",label:"Mag. 4"},{value:7,color:"#be0126",label:"Mag. 7"}]},{type:"opacity",field:"mag",stops:[{value:1,opacity:.05},{value:7,opacity:.8}],legendOptions:{showLegend:!1}}]},fields:[new n({name:"mag",alias:"Magnitude",type:"double"})]}),d=new t({url:"https://www.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json"}),p=new r({portalItem:{id:"1b243539f4514b6ba35e7d995890db1d"},opacity:.2}),y=new t({url:"https://www.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",opacity:.7}),g=new e({basemap:new a({baseLayers:[d,p],referenceLayers:[y]}),layers:[u]}),m=new s({container:"mapDiv",map:g,zoom:3,center:[-97,39]}),w=new i({view:m}),f=new l({view:m,layerInfos:[{layer:u,title:"Earthquake Magnitude"}]});function v(e){var a=parseFloat(e.target.value);c.filter={where:"mag >= ".concat(a)}}m.whenLayerView(u).then(function(e){c=e}).catch(function(e){return console.log(e)});var h=document.querySelectorAll("select");h.forEach(function(e){e.addEventListener("change",v)}),m.when(function(){m.ui.add(w,"top-left"),m.ui.add(f,"bottom-right")})}));
